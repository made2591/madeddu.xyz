<!DOCTYPE html>
<html>
  <head>
    <!-- Google Tag Manager -->
    <!--<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-M8WBXH7');</script>-->
    <!-- End Google Tag Manager -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href=/public/stylesheets/bs.css?random=@Environment.TickCount>
    <link rel="stylesheet" href=/public/stylesheets/styles.css?random=@Environment.TickCount>
    <link rel="stylesheet" href=/public/stylesheets/pygment_trac.css?random=@Environment.TickCount>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <link rel="canonical" href="made2591.github.io/posts/golang-turing-machine">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      <link rel="icon" type="image/x-icon"  href="/favicon.ico" />
    <title>A Golang Turing machine library | Matteo Madeddu</title>
    <!--[if lt IE 9]>

      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <!--<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M8WBXH7"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="wrapper">
        <section>
          <div id="header">
  <h1>
    <a id="sitename" href="">Matteo Madeddu</a>
  </h1>

  <!-- Add something about you in p tag-->
  <p>Mac OS lover, Docker fan, Go explorer, Python geek, Trello addicted.</p>
  <hr/>

  <span class="credits pull-left">
    
      <a href="/">Home</a>  | 
    
      <a href="/blog">Blog</a>  | 
    
      <a href="/archive">Archive</a>  | 
    
      <a href="/about">About</a>  | 
    
      <a href="/matteo_madeddu_cv.pdf">Resume</a>  | 
    
      <a href="/quotes">Quotes</a> 
    
  </span>

  <span class="credits pull-right social">
    
      
        <a href="https://github.com/made2591/" target="_blank"><i class="fa fa-github"></i></a>
      
    
      
        <a href="https://twitter.com/made2591" target="_blank"><i class="fa fa-twitter"></i></a>
      
    
      
        <a href="https://linkedin.com/in/mmadeddu" target="_blank"><i class="fa fa-linkedin"></i></a>
      
    
      
        <a href="https://www.facebook.com/matteo.madeddu" target="_blank"><i class="fa fa-facebook"></i></a>
      
    
  </span>


</div>


          <div class="post-title">
    <h1>A Golang Turing machine library</h1>
    <p class="text-muted">
    


    19 Jan 2019
    
     | <i class="fa fa-comment"></i> <a class="text-muted" href="/posts/golang-turing-machine/#disqus_thread"></a>
    

    
      | <i class="fa fa-tag"></i>
      
        <a class="text-muted" href="/tags/#busy-beaver ">busy-beaver</a>,
      
        <a class="text-muted" href="/tags/#golang ">golang</a>,
      
        <a class="text-muted" href="/tags/#tibor ">tibor</a>,
      
        <a class="text-muted" href="/tags/#computational ">computational</a>,
      
        <a class="text-muted" href="/tags/#theory ">theory</a>
      
    
  </p>
</div>

  <h3 id="preamble">Preamble</h3>
<p>In 1962, Hungarian mathematician Tibor Rad√≥ introduced the Busy Beaver competition for Turing machines: in a class of machines, find one which halts after the greatest number of steps when started on the empty input. Even if it could seem trivial, the Busy Beaver competition has implications in computability theory, the halting problem, and complexity theory.</p>

<p>I decided to use GoLang to implement a Turing machine library and accomplish three goals: first, having a Turing Machine model to play with for learning purpose; second, learning how to use interfaces and the factory pattern, other then testing package to test my code and let it be more flexible for future enhancement (at least I hope!); third, implement some Busy Beaver setup and verify that the model works with well known executions. If you want to discover more about Golang, 60‚Äôs math games and beavers, go ahead with reading :D!</p>

<p align="center"><img src="https://i.imgur.com/RuYp5Y1.png" style="width: 70%; marker-top: -10px;" /></p>

<h3 id="theory-first">Theory first</h3>
<p>Before starting, let‚Äôs define a Turing machine. A Turing machine is a mathematical model of computation that defines an abstract machine which manipulates symbols on a strip of tape according to a list of rules. Formally, we can image a infinite tape of 0 with a pointer (identified by square bracket) to one specific zero,</p>

<script type="math/tex; mode=display">... 0 0 0 0 0 [0] 0 0 0 0 0  ...</script>

<p>a set of states identified by letters (or numbers),</p>

<script type="math/tex; mode=display">{A, B, C}</script>

<p>and a list of transactions, like the one</p>

<script type="math/tex; mode=display">(A, 0, B, 1, R);</script>

<p>where a single transaction like <em>(A, 0, B, 1, R)</em> has to been read as</p>

<blockquote>
  <p><em>Given a Turing machine in state A with the pointer over a 0, write 1, evolve to state B and move the pointer by one position in right direction over the tape</em>.</p>
</blockquote>

<p>The pointer can only be moved by one position at time, left, right, or stay where it is. Everything‚Äôs clear?</p>

<h3 id="implementation">Implementation</h3>
<p>To implement my Turing machine, I choose Golang as language and, to be more flexible, I coded by using the factory pattern. What is a factory pattern?</p>

<h4 id="the-factory-pattern">The factory pattern</h4>
<p>The factory pattern is a commonly used pattern in object oriented programming: the main reason you decide to use factory pattern is that it provide to thirds a way to better consume your struct. Instead of initializing instances using something like <code class="highlighter-rouge">myStruct := &amp;MyStruct{}</code>, a factory pattern provide a function signature that return your struct, by ensuring that everyone will supply the required attributes.</p>

<p>Now, the cool thing is that in Golang functions <em>can return interfaces instead of structs</em>: interfaces allow you to define behaviour without exposing internal implementation. As in other programming languages, you define method to be implemented inside an interface, and every struct that implement them is considered <em>implementing</em> the interface. This means we can make private structs, while only exposing the interface outside our package, and let user interact with the struct with the only available method inside.</p>

<h4 id="transactions">Transactions</h4>
<p>The first lines of the package <code class="highlighter-rouge">Transaction</code> look like the one shown below:</p>

<figure class="highlight"><pre><code class="language-golang" data-lang="golang"><span class="k">var</span><span class="x"> </span><span class="n">ACTIONS</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">"R"</span><span class="p">,</span><span class="x"> </span><span class="s">"L"</span><span class="p">,</span><span class="x"> </span><span class="s">"N"</span><span class="p">}</span><span class="x">

</span><span class="c">// Transaction interface</span><span class="x">
</span><span class="k">type</span><span class="x"> </span><span class="n">Transaction</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">Validate</span><span class="p">(</span><span class="n">m</span><span class="x"> </span><span class="n">TuringMachine</span><span class="p">)</span><span class="x"> </span><span class="kt">bool</span><span class="x">
	</span><span class="n">Simulate</span><span class="p">()</span><span class="x"> </span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">State</span><span class="p">,</span><span class="x"> </span><span class="n">symbol</span><span class="o">.</span><span class="n">Symbol</span><span class="p">,</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x">
	</span><span class="n">GetCurrentState</span><span class="p">()</span><span class="x"> </span><span class="n">state</span><span class="o">.</span><span class="n">State</span><span class="x">
	</span><span class="n">GetSymbolScanned</span><span class="p">()</span><span class="x"> </span><span class="n">symbol</span><span class="o">.</span><span class="n">Symbol</span><span class="x">
	</span><span class="n">GetNewState</span><span class="p">()</span><span class="x"> </span><span class="n">state</span><span class="o">.</span><span class="n">State</span><span class="x">
	</span><span class="n">GetSymbolWritten</span><span class="p">()</span><span class="x"> </span><span class="n">symbol</span><span class="o">.</span><span class="n">Symbol</span><span class="x">
	</span><span class="n">GetMoveTape</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x">
	</span><span class="n">Print</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="c">// transaction struct</span><span class="x">
</span><span class="k">type</span><span class="x"> </span><span class="n">transaction</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">currentState</span><span class="x">  </span><span class="n">state</span><span class="o">.</span><span class="n">State</span><span class="x">
	</span><span class="n">symbolScanned</span><span class="x"> </span><span class="n">symbol</span><span class="o">.</span><span class="n">Symbol</span><span class="x">
	</span><span class="n">newState</span><span class="x">      </span><span class="n">state</span><span class="o">.</span><span class="n">State</span><span class="x">
	</span><span class="n">symbolWritten</span><span class="x"> </span><span class="n">symbol</span><span class="o">.</span><span class="n">Symbol</span><span class="x">
	</span><span class="n">moveTape</span><span class="x">      </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span></code></pre></figure>

<p>where <code class="highlighter-rouge">state.State</code> and <code class="highlighter-rouge">symbol.Symbol</code> refer respectively to the state, symbol packages and the State, Symbol interfaces defined inside them. The <code class="highlighter-rouge">Transaction</code> interface defines which methods have to be exposed outside: the <code class="highlighter-rouge">transaction</code> struct implements the Transaction interface. Let‚Äôs have a look at a couple of methods after that:</p>

<figure class="highlight"><pre><code class="language-golang" data-lang="golang"><span class="c">// NewTransaction() Create a new Transaction with given</span><span class="x">
</span><span class="c">// currentState, symbolScanned, symbolWritten and moveTape action</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">NewTransaction</span><span class="p">(</span><span class="n">currentState</span><span class="x"> </span><span class="n">state</span><span class="o">.</span><span class="n">State</span><span class="p">,</span><span class="x"> </span><span class="n">symbolScanned</span><span class="x"> </span><span class="n">symbol</span><span class="o">.</span><span class="n">Symbol</span><span class="p">,</span><span class="x">
    </span><span class="n">newState</span><span class="x"> </span><span class="n">state</span><span class="o">.</span><span class="n">State</span><span class="p">,</span><span class="x"> </span><span class="n">symbolWritten</span><span class="x"> </span><span class="n">symbol</span><span class="o">.</span><span class="n">Symbol</span><span class="p">,</span><span class="x"> </span><span class="n">moveTape</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="n">Transaction</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="n">t</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">transaction</span><span class="p">{}</span><span class="x">
	</span><span class="n">t</span><span class="o">.</span><span class="n">currentState</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">currentState</span><span class="x">
	</span><span class="n">t</span><span class="o">.</span><span class="n">symbolScanned</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">symbolScanned</span><span class="x">
	</span><span class="n">t</span><span class="o">.</span><span class="n">newState</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">newState</span><span class="x">
	</span><span class="n">t</span><span class="o">.</span><span class="n">symbolWritten</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">symbolWritten</span><span class="x">
	</span><span class="n">t</span><span class="o">.</span><span class="n">moveTape</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">moveTape</span><span class="x">

	</span><span class="k">return</span><span class="x"> </span><span class="n">t</span><span class="x">

</span><span class="p">}</span></code></pre></figure>

<p>The <code class="highlighter-rouge">NewTransaction(...)</code> functions solve the problem of exposing the <code class="highlighter-rouge">transaction</code> struct, by return a pointer to a struct as the Transaction interface: in fact, since the transaction struct is private we wouldn‚Äôt be able to interfact with it. That‚Äôs the reason the signature actually returns an interface, that is exposed: this is possible because the pointers can also implement interfaces.</p>

<figure class="highlight"><pre><code class="language-golang" data-lang="golang"><span class="c">// Validate(m TuringMachine) Validate the transaction t with respect</span><span class="x">
</span><span class="c">// to the TuringMachine m. A Transaction to be considered valid</span><span class="x">
</span><span class="c">// need to be defined with a valid ACTIONS, the current state of the</span><span class="x">
</span><span class="c">// TuringMachine must be equal to the state in which the transaction</span><span class="x">
</span><span class="c">// is activated and the head of the TuringMachine must point to the</span><span class="x">
</span><span class="c">// the same symbol scanned by the transaction. If all of this three</span><span class="x">
</span><span class="c">// condition are verified, Validate(m TuringMachine) over t returns</span><span class="x">
</span><span class="c">// true; it returns otherwise</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">t</span><span class="x"> </span><span class="o">*</span><span class="n">transaction</span><span class="p">)</span><span class="x"> </span><span class="n">Validate</span><span class="p">(</span><span class="n">m</span><span class="x"> </span><span class="n">TuringMachine</span><span class="p">)</span><span class="x"> </span><span class="kt">bool</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="c">// check if moveTape action is allowed</span><span class="x">
	</span><span class="k">for</span><span class="x"> </span><span class="n">_</span><span class="p">,</span><span class="x"> </span><span class="n">a</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">ACTIONS</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="k">if</span><span class="x"> </span><span class="n">strings</span><span class="o">.</span><span class="n">EqualFold</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="x"> </span><span class="n">t</span><span class="o">.</span><span class="n">moveTape</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="c">// check if actual state and scanned</span><span class="x">
                        </span><span class="c">// symbol match with transaction</span><span class="x">
			</span><span class="k">return</span><span class="x"> </span><span class="n">t</span><span class="o">.</span><span class="n">currentState</span><span class="o">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">GetActualState</span><span class="p">())</span><span class="x">
                            </span><span class="o">&amp;&amp;</span><span class="x"> </span><span class="n">t</span><span class="o">.</span><span class="n">symbolScanned</span><span class="o">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">GetActualSymbol</span><span class="p">())</span><span class="x">
		</span><span class="p">}</span><span class="x">
	</span><span class="p">}</span><span class="x">

	</span><span class="k">return</span><span class="x"> </span><span class="no">false</span><span class="x">

</span><span class="p">}</span></code></pre></figure>

<p>The <code class="highlighter-rouge">Validate</code> function return true if a transaction is valid inside the Turing Machine m. A Transaction is valid if</p>

<ul>
  <li>the action to be execute is a valid action identifier - it‚Äôs contained in the set of {‚ÄúL‚Äù,‚ÄùR‚Äù,‚ÄùN‚Äù};</li>
  <li>the current state of the Turing machine is equal to the state in which the transaction is activated;</li>
  <li>the current head of the Turing machine points to the the same symbol scanned by the transaction;</li>
</ul>

<p>Similarly, you can implement <code class="highlighter-rouge">Symbol</code>, <code class="highlighter-rouge">State</code> and <code class="highlighter-rouge">TuringMachine</code>. Since Symbol and State packages are pretty easy to implement, let‚Äôs have a look the Turing machine definition and the execution method defined inside it.</p>

<h4 id="turing-machine">Turing Machine</h4>
<p>The Turing machine interface is defined as shown below:</p>

<figure class="highlight"><pre><code class="language-golang" data-lang="golang"><span class="c">// TuringMachine interface</span><span class="x">
</span><span class="k">type</span><span class="x"> </span><span class="n">TuringMachine</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">Run</span><span class="p">()</span><span class="x">
	</span><span class="n">Step</span><span class="p">()</span><span class="x"> </span><span class="n">state</span><span class="o">.</span><span class="n">State</span><span class="x">
	</span><span class="n">Computed</span><span class="p">()</span><span class="x"> </span><span class="kt">bool</span><span class="x">
	</span><span class="n">GetActualSymbol</span><span class="p">()</span><span class="x"> </span><span class="n">symbol</span><span class="o">.</span><span class="n">Symbol</span><span class="x">
	</span><span class="n">GetActualState</span><span class="p">()</span><span class="x"> </span><span class="n">state</span><span class="o">.</span><span class="n">State</span><span class="x">
	</span><span class="n">MoveHeadPointer</span><span class="p">(</span><span class="n">s</span><span class="x"> </span><span class="n">symbol</span><span class="o">.</span><span class="n">Symbol</span><span class="p">,</span><span class="x"> </span><span class="n">m</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="kt">int</span><span class="x">
	</span><span class="n">Print</span><span class="p">()</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="c">// turingMachine struct</span><span class="x">
</span><span class="k">type</span><span class="x"> </span><span class="n">turingMachine</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">initialStates</span><span class="x"> </span><span class="n">set</span><span class="o">.</span><span class="n">Set</span><span class="x">
	</span><span class="n">finalStates</span><span class="x">   </span><span class="n">set</span><span class="o">.</span><span class="n">Set</span><span class="x">
	</span><span class="n">transactions</span><span class="x">  </span><span class="n">set</span><span class="o">.</span><span class="n">Set</span><span class="x">
	</span><span class="n">actualState</span><span class="x">   </span><span class="n">state</span><span class="o">.</span><span class="n">State</span><span class="x">
	</span><span class="n">headPointer</span><span class="x">   </span><span class="kt">int</span><span class="x">
	</span><span class="n">tape</span><span class="x">          </span><span class="p">[]</span><span class="n">symbol</span><span class="o">.</span><span class="n">Symbol</span><span class="x">
</span><span class="p">}</span></code></pre></figure>

<p>The key methods are <code class="highlighter-rouge">Run()</code>, <code class="highlighter-rouge">Step()</code> and <code class="highlighter-rouge">Computed()</code>. The Run() method is the simplest one: it runs the Step() function indefinitely until the Turing machine is computed completely.</p>

<figure class="highlight"><pre><code class="language-golang" data-lang="golang"><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">tm</span><span class="x"> </span><span class="o">*</span><span class="n">turingMachine</span><span class="p">)</span><span class="x"> </span><span class="n">Run</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="k">for</span><span class="x"> </span><span class="o">!</span><span class="n">tm</span><span class="o">.</span><span class="n">Computed</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="n">tm</span><span class="o">.</span><span class="n">Step</span><span class="p">()</span><span class="x">
	</span><span class="p">}</span><span class="x">
	</span><span class="k">return</span><span class="x">

</span><span class="p">}</span></code></pre></figure>

<p>A Turing machine is computed completely when it reaches a Final State, that is exactly what the Computed method said about our Turing machine.</p>

<figure class="highlight"><pre><code class="language-golang" data-lang="golang"><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">tm</span><span class="x"> </span><span class="o">*</span><span class="n">turingMachine</span><span class="p">)</span><span class="x"> </span><span class="n">Computed</span><span class="p">()</span><span class="x"> </span><span class="kt">bool</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="k">return</span><span class="x"> </span><span class="n">tm</span><span class="o">.</span><span class="n">actualState</span><span class="o">.</span><span class="n">IsFinal</span><span class="p">()</span><span class="x">

</span><span class="p">}</span></code></pre></figure>

<p>What about the Step() function?</p>

<figure class="highlight"><pre><code class="language-golang" data-lang="golang"><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">tm</span><span class="x"> </span><span class="o">*</span><span class="n">turingMachine</span><span class="p">)</span><span class="x"> </span><span class="n">Step</span><span class="p">()</span><span class="x"> </span><span class="n">state</span><span class="o">.</span><span class="n">State</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="k">for</span><span class="x"> </span><span class="n">_</span><span class="p">,</span><span class="x"> </span><span class="n">t</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">tm</span><span class="o">.</span><span class="n">transactions</span><span class="o">.</span><span class="n">Iterator</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="k">if</span><span class="x"> </span><span class="n">t</span><span class="o">.</span><span class="p">(</span><span class="n">Transaction</span><span class="p">)</span><span class="o">.</span><span class="n">Validate</span><span class="p">(</span><span class="n">tm</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
			</span><span class="k">return</span><span class="x"> </span><span class="n">tm</span><span class="o">.</span><span class="n">Execute</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="p">(</span><span class="n">Transaction</span><span class="p">))</span><span class="x">
		</span><span class="p">}</span><span class="x">
	</span><span class="p">}</span><span class="x">
	</span><span class="k">return</span><span class="x"> </span><span class="n">tm</span><span class="o">.</span><span class="n">actualState</span><span class="x">

</span><span class="p">}</span></code></pre></figure>

<p>For the execute part, you can have a look directly <a href="https://github.com/made2591/go-tm/blob/master/turing/machine/machine.go">here</a>.</p>

<h3 id="before-going-ahead">Before going ahead</h3>
<p>Testing! I learn how much you gain by testing your code playing with returns, default, pointers and indexes. Fortunately, build testing in Golang is quite easy, specially for simple functions like the one we shown before. For instance, the following test function is defined in a <code class="highlighter-rouge">symbol_test.go</code> file - at the same level of the <code class="highlighter-rouge">symbol</code>. Then</p>

<figure class="highlight"><pre><code class="language-golang" data-lang="golang"><span class="k">func</span><span class="x"> </span><span class="n">TestErase</span><span class="p">(</span><span class="n">t</span><span class="x"> </span><span class="o">*</span><span class="n">testing</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">

	</span><span class="c">// test erase a Symbol</span><span class="x">
	</span><span class="n">s</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">NewSymbol</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">1</span><span class="p">))</span><span class="x">
	</span><span class="n">s</span><span class="o">.</span><span class="n">Erase</span><span class="p">()</span><span class="x">
	</span><span class="k">if</span><span class="x"> </span><span class="n">v</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">s</span><span class="o">.</span><span class="n">GetValue</span><span class="p">();</span><span class="x"> </span><span class="n">v</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="n">BLANK</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="n">t</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"Erase was incorrect, got: %d, want: %d."</span><span class="p">,</span><span class="x"> </span><span class="n">v</span><span class="p">,</span><span class="x"> </span><span class="kt">uint8</span><span class="p">(</span><span class="n">BLANK</span><span class="p">))</span><span class="x">
	</span><span class="p">}</span><span class="x">

</span><span class="p">}</span></code></pre></figure>

<p>The testing functions are always named like <code class="highlighter-rouge">[Test]OriginalFunctionName</code> and always accept only one parameter <code class="highlighter-rouge">t *testing.T</code><sup id="fnref:gotesting"><a href="#fn:gotesting" class="footnote">1</a></sup>. After that, from inside your project folder run this in a shell:</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh">go <span class="nb">test</span> ./...</code></pre></figure>

<p>Just prepend GOCACHE=off if you want to ignore caching. For the entire code, follow the <a href="https://github.com/made2591/go-tm">link</a>.</p>

<p>Now it‚Äôs time to build our Busy Beaver!!</p>

<h3 id="the-busy-beaver-competition">The Busy Beaver competition</h3>
<p>The Busy Beaver game consists of designing a halting, binary-alphabet Turing machine which writes the most <em>1</em>s on the tape, using only a limited set of states. The rules for the 2-state game are as follows:</p>

<ul>
  <li>The machine must have two states in addition to the halting state, and</li>
  <li>The tape starts with 0s only</li>
</ul>

<p>As the player, you should conceive each state aiming for the maximum output of 1s on the tape while making sure the machine will halt eventually.</p>

<p>The <em>n-th</em> Busy Beaver, BB-n or simply ‚ÄúBusy Beaver‚Äù is the Turing machine that wins the n-state Busy Beaver Game. That is, it attains the maximum number of 1s among all other possible <em>n</em>-state competing Turing Machines. The BB-2 Turing machine, for instance, achieves four <em>1</em>s in six steps.</p>

<p>You can easily build the BB-2 Beaver with 4 simple transaction plus 1 to move from the initial state to the ‚ÄúA‚Äù state.</p>

<figure class="highlight"><pre><code class="language-golang" data-lang="golang"><span class="n">tr0</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">transaction</span><span class="o">.</span><span class="n">NewTransaction</span><span class="p">(</span><span class="x">
	</span><span class="n">state</span><span class="o">.</span><span class="n">NewInitialState</span><span class="p">(),</span><span class="x">
	</span><span class="n">symbol</span><span class="o">.</span><span class="n">NewSymbol</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">0</span><span class="p">)),</span><span class="x">
	</span><span class="n">state</span><span class="o">.</span><span class="n">NewState</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">21</span><span class="p">)),</span><span class="x">
	</span><span class="n">symbol</span><span class="o">.</span><span class="n">NewSymbol</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">0</span><span class="p">)),</span><span class="x"> </span><span class="s">"N"</span><span class="p">)</span><span class="x">

</span><span class="n">tr1</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">transaction</span><span class="o">.</span><span class="n">NewTransaction</span><span class="p">(</span><span class="x">
	</span><span class="n">state</span><span class="o">.</span><span class="n">NewState</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">21</span><span class="p">)),</span><span class="x">
	</span><span class="n">symbol</span><span class="o">.</span><span class="n">NewSymbol</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">0</span><span class="p">)),</span><span class="x">
	</span><span class="n">state</span><span class="o">.</span><span class="n">NewState</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">22</span><span class="p">)),</span><span class="x">
	</span><span class="n">symbol</span><span class="o">.</span><span class="n">NewSymbol</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">1</span><span class="p">)),</span><span class="x"> </span><span class="s">"R"</span><span class="p">)</span><span class="x">

</span><span class="n">tr2</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">transaction</span><span class="o">.</span><span class="n">NewTransaction</span><span class="p">(</span><span class="x">
	</span><span class="n">state</span><span class="o">.</span><span class="n">NewState</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">21</span><span class="p">)),</span><span class="x">
	</span><span class="n">symbol</span><span class="o">.</span><span class="n">NewSymbol</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">1</span><span class="p">)),</span><span class="x">
	</span><span class="n">state</span><span class="o">.</span><span class="n">NewState</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">22</span><span class="p">)),</span><span class="x">
	</span><span class="n">symbol</span><span class="o">.</span><span class="n">NewSymbol</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">1</span><span class="p">)),</span><span class="x"> </span><span class="s">"L"</span><span class="p">)</span><span class="x">

</span><span class="n">tr3</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">transaction</span><span class="o">.</span><span class="n">NewTransaction</span><span class="p">(</span><span class="x">
	</span><span class="n">state</span><span class="o">.</span><span class="n">NewState</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">22</span><span class="p">)),</span><span class="x">
	</span><span class="n">symbol</span><span class="o">.</span><span class="n">NewSymbol</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">0</span><span class="p">)),</span><span class="x">
	</span><span class="n">state</span><span class="o">.</span><span class="n">NewState</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">21</span><span class="p">)),</span><span class="x">
	</span><span class="n">symbol</span><span class="o">.</span><span class="n">NewSymbol</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">1</span><span class="p">)),</span><span class="x"> </span><span class="s">"L"</span><span class="p">)</span><span class="x">

</span><span class="n">tr4</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">transaction</span><span class="o">.</span><span class="n">NewTransaction</span><span class="p">(</span><span class="x">
	</span><span class="n">state</span><span class="o">.</span><span class="n">NewState</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">22</span><span class="p">)),</span><span class="x">
	</span><span class="n">symbol</span><span class="o">.</span><span class="n">NewSymbol</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">1</span><span class="p">)),</span><span class="x">
	</span><span class="n">state</span><span class="o">.</span><span class="n">NewFinalState</span><span class="p">(),</span><span class="x">
	</span><span class="n">symbol</span><span class="o">.</span><span class="n">NewSymbol</span><span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m">1</span><span class="p">)),</span><span class="x"> </span><span class="s">"R"</span><span class="p">)</span></code></pre></figure>

<p>Or, in a more user friendly format:</p>

<table>
  <thead>
    <tr>
      <th>¬†</th>
      <th>21</th>
      <th>22</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1R22</td>
      <td>1L21</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1L22</td>
      <td>1RFINAL</td>
    </tr>
  </tbody>
</table>

<p>with an initial transaction from INITIAL to 21 with symbol 0 scanned, that does nothing and ports to state 21.
Let‚Äôs have a look at the evolution of the BB-2 Turing machine: first apply first transaction from INITIAL to A - it a sort of 0¬∞ Step that just change the state of the machine from INITIAL to 21, in such a way that the init tape looks like this</p>

<script type="math/tex; mode=display">... 0 0 0 0 0 [0] 0 0 0 0 0 0 0 ...</script>

<h3 id="bb-2-beaver-execution">BB-2 Beaver Execution</h3>

<p><span style="color:#A04279; font-size: bold;">1¬∞ Step</span>: apply 1R22 transaction from A in 0 to B by writing 1, evolve in state B and move the cursor one step in the right direction</p>

<script type="math/tex; mode=display">... 0 0 0 0 0 1 [0] 0 0 0 0 0 0 ...</script>

<p><span style="color:#A04279; font-size: bold;">2¬∞ Step</span>: apply 1L21 transaction from B in 0 to A by writing 1, evolve in state A and move the cursor one step in the left direction</p>

<script type="math/tex; mode=display">... 0 0 0 0 0 [1] 1 0 0 0 0 0 0 ...</script>

<p><span style="color:#A04279; font-size: bold;">3¬∞ Step</span>: apply 1L22 transaction from A in 1 to B by writing 1 (this will result in an overwrite) and move the cursor one step in the left direction</p>

<script type="math/tex; mode=display">... 0 0 0 0 [0] 1 1 0 0 0 0 0 0 ...</script>

<p><span style="color:#A04279; font-size: bold;">4¬∞ Step</span>: apply 1L21 transaction from B in 0 to A by writing 1, evolve in state A and move the cursor one step in the left direction</p>

<script type="math/tex; mode=display">... 0 0 0 [0] 1 1 1 0 0 0 0 0 0 ...</script>

<p><span style="color:#A04279; font-size: bold;">5¬∞ Step</span>: apply 1R22 transaction from A in 0 to B by writing 1, evolve in state B and move the cursor one step in the right direction</p>

<script type="math/tex; mode=display">... 0 0 0 1 [1] 1 1 0 0 0 0 0 0 ...</script>

<p><span style="color:#A04279; font-size: bold;">6¬∞ Step</span>: finally, apply 1RFINAL transaction from B in 1 to FINAL by writing 1 (this will result in an overwrite), evolve in state B and move the cursor one step in the right direction</p>

<script type="math/tex; mode=display">... 0 0 0 1 1 [1] 1 0 0 0 0 0 0 ...</script>

<p>And the execution is finished! Four <em>1</em>s, six steps, as promised!</p>

<p>To be continued with Non Deterministic experiment‚Ä¶</p>

<h3 id="conclusion">Conclusion</h3>
<p>For the most curious people, the original paper is Tibor Rad√≥ - <em>On Non-Computable Functions</em> - <a href="http://infoteorica.weebly.com/uploads/1/7/8/9/17895653/rado_on_non-computable_functions_bell_system_technical_journal_41_1962_pp._877-884.pdf">here</a>.
My Github repo with my implementation of the Busy Beaver game is available <a href="https://github.com/made2591/go-tm">here</a>.</p>

<div class="footnotes">
  <ol>
    <li id="fn:gotesting">
      <p><a href="https://github.com/golang/go/blob/master/src/testing/testing.go">Here</a> the code&nbsp;<a href="#fnref:gotesting" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>


<div class="comments">
   <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'made2591';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    

</div>

<hr/>


  
    <div class="post-navs row">
      
        <div class="col-md-6 post-nav">

          <h3 class="section-header">
            Older
            <span class="text-muted"> &middot; </span>
            <a href="/archive">View Archive (35)</a>
          </h3>

          <h2 class="post-title-link"><a href="/posts/smart-spa-shower">Smart SPA Shower at home</a></h2>
          <h3 id="preamble">Preamble</h3>
<p>I recently bought 4 small smart bulbs - the latest one you most probably decide to buy for your smart home üòÇüòÇ I think it‚Äôs useless talk about what you can do: I will only focus on the important things.</p>


        </div>
      
      

        <div class="col-md-6 post-nav">
          <h3 class="section-header">
            Newer
            
          </h3>

          <h2 class="post-title-link"><a href="/posts/deutsch-algorithm">The Deutsch Algorithm</a></h2>
          <h3 id="much-more-than-a-post-again">Much more than a post (again)</h3>
<p>What is the quantum theory? As said by <a href="https://quantumexperience.ng.bluemix.net/">quantumexperience</a> official site by IBM, it‚Äôs <em>an elegant mathematical theory able to explain the counterintuitive behavior of subatomic particles, most notably the phenomenon of entanglement</em>. In the late twentieth century it was discovered that quantum theory applies not only to atoms and molecules, but to bits and logic operations in a computer. This realization has been bringing about a revolution in the science and technology of information processing: I decided to write some notes to better explain, from a physics-agnostic computer scientist‚Äôs point of view XD, <strong>what I understood</strong> - and it is certainly wrong - about Q until now and why I think it‚Äôs an amazing field for computer science. More on this story in <a href="https://made2591.github.io/posts/quantum-computing">my previous post</a>.</p>


        </div>
      
    </div>
  



          <div id="footer">
<hr/>
  <div class="pull-left">
    &copy;2019.
    Built with <a href="http://jekyllrb.com/">Jekyll</a> and
    <a href="https://github.com/kirqe/autm-rb">Autm-rb</a>. Thanks to <a href="https://github.com/kirqe">kirqe</a>.
  </div>

  <div class="pull-right">
    <span class="credits pull-right social">
      
        
          <a href="https://github.com/made2591/" target="_blank"><i class="fa fa-github"></i></a>
        
      
        
          <a href="https://twitter.com/made2591" target="_blank"><i class="fa fa-twitter"></i></a>
        
      
        
          <a href="https://linkedin.com/in/mmadeddu" target="_blank"><i class="fa fa-linkedin"></i></a>
        
      
        
          <a href="https://www.facebook.com/matteo.madeddu" target="_blank"><i class="fa fa-facebook"></i></a>
        
      
    </span>
  </div>
</div>

        </section>
    </div>
    </div>
    <script src="/public/javascripts/jquery.min.js"></script>
    <script src="/public/javascripts/bootstrap.min.js"></script>
    <!-- Place your <script> tags here. -->

<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

<script id="dsq-count-scr" src="//made2591-github-io.disqus.com/count.js" async></script>

<!-- disqus comment counter -->
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'made2591-github-io';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function () {
	    var s = document.createElement('script'); s.async = true;
	    s.type = 'text/javascript';
	    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
	    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
	}());
</script>
<!-- /disqus comment counter -->

<!-- google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-111283556-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-111283556-1');
</script>
<!-- /google analytics -->

  </body>
</html>
